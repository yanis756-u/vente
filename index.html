<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameShop - Vente de Jeux Vidéo</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="header-left">
            <h1 class="logo" onclick="showView('catalog')">GameShop</h1>
        </div>
        <div class="header-center">
            <input type="text" id="searchInput" placeholder="Rechercher un jeu..." oninput="searchGames()">
        </div>
        <div class="header-right">
            <div id="authButtons">
                <button class="btn btn-outline" onclick="showAuthModal('login')">Connexion</button>
                <button class="btn btn-primary" onclick="showAuthModal('register')">Inscription</button>
            </div>
            <div id="userInfo" class="hidden">
                <span id="userName"></span>
                <button id="adminBtn" class="btn btn-accent hidden" onclick="showView('admin')">Admin</button>
                <button class="btn btn-outline" onclick="logout()">Déconnexion</button>
            </div>
            <button class="btn btn-cart" onclick="showView('cart')">
                Panier (<span id="cartCount">0</span>)
            </button>
        </div>
    </header>

    <main>
        <section id="catalogView">
            <div class="catalog-header">
                <h2>Catalogue</h2>
                <div class="sort-controls">
                    <label for="sortSelect">Trier par :</label>
                    <select id="sortSelect" onchange="renderGames()">
                        <option value="name-asc">Nom (A-Z)</option>
                        <option value="name-desc">Nom (Z-A)</option>
                        <option value="price-asc">Prix (croissant)</option>
                        <option value="price-desc">Prix (décroissant)</option>
                        <option value="year-desc">Date (récent)</option>
                        <option value="year-asc">Date (ancien)</option>
                    </select>
                </div>
            </div>
            <div id="gamesGrid" class="games-grid"></div>
        </section>

        <section id="cartView" class="hidden">
            <h2>Mon Panier</h2>
            <div id="cartItems"></div>
            <div id="cartFooter" class="hidden">
                <div class="cart-total">Total : <span id="cartTotal">0.00</span> &euro;</div>
                <button class="btn btn-primary btn-lg" onclick="confirmPurchase()">Confirmer l'achat</button>
            </div>
            <p id="cartEmpty" class="empty-msg">Votre panier est vide.</p>
        </section>

        <section id="adminView" class="hidden">
            <h2>Panel Admin</h2>
            <div class="admin-layout">
                <div class="admin-form-container">
                    <h3 id="adminFormTitle">Ajouter un jeu</h3>
                    <form id="gameForm" onsubmit="submitGameForm(event)">
                        <input type="hidden" id="editGameId" value="">
                        <label>Nom</label>
                        <input type="text" id="gameName" required>
                        <label>Description</label>
                        <textarea id="gameDesc" required></textarea>
                        <label>URL de l'image</label>
                        <input type="text" id="gameImage" required>
                        <label>Année de sortie</label>
                        <input type="number" id="gameYear" required>
                        <label>Développeur</label>
                        <input type="text" id="gameDev" required>
                        <label>Prix (&euro;)</label>
                        <input type="number" id="gamePrice" step="0.01" required>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Enregistrer</button>
                            <button type="button" class="btn btn-outline" onclick="resetGameForm()">Annuler</button>
                        </div>
                    </form>
                </div>
                <div class="admin-list-container">
                    <h3>Jeux existants</h3>
                    <div id="adminGamesList"></div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal Auth -->
    <div id="authModal" class="modal-overlay hidden" onclick="closeModalOnOverlay(event)">
        <div class="modal">
            <button class="modal-close" onclick="closeAuthModal()">&times;</button>

            <div id="loginForm">
                <h2>Connexion</h2>
                <form onsubmit="login(event)">
                    <label>Email</label>
                    <input type="email" id="loginEmail" required>
                    <label>Mot de passe</label>
                    <input type="password" id="loginPassword" required>
                    <button type="submit" class="btn btn-primary btn-lg">Se connecter</button>
                </form>
                <p class="modal-switch">Pas de compte ? <a href="#" onclick="showAuthModal('register')">Inscrivez-vous</a></p>
            </div>

            <div id="registerForm" class="hidden">
                <h2>Inscription</h2>
                <form onsubmit="register(event)">
                    <label>Pseudo</label>
                    <input type="text" id="regPseudo" required>
                    <label>Email</label>
                    <input type="email" id="regEmail" required>
                    <label>Mot de passe</label>
                    <input type="password" id="regPassword" required minlength="4">
                    <button type="submit" class="btn btn-primary btn-lg">S'inscrire</button>
                </form>
                <p class="modal-switch">Déjà un compte ? <a href="#" onclick="showAuthModal('login')">Connectez-vous</a></p>
            </div>

            <p id="authError" class="error-msg hidden"></p>
        </div>
    </div>

    <!-- Message toast -->
    <div id="toast" class="toast hidden"></div>

    <script src="app.js"></script>
</body>
</html>
